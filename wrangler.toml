name = "viewfinderfp"
compatibility_date = "2023-01-01"
compatibility_flags = ["nodejs_compat"]

# Base configuration
[site]
bucket = "./dist"

[build]
command = "npm run build"
upload.format = "service-worker"

# Production environment
[env.production]
name = "viewfinderfp-production"
workers_dev = true
routes = [
    { pattern = "viewfinderfp.com/*", zone_name = "viewfinderfp.com" }
]

# Development environment
[env.development]
name = "viewfinderfp-development"
workers_dev = true

[vars]
NODE_VERSION = "18"

[build.upload]
format = "modules"
main = "./dist/_worker.js"
dir = "dist"

# Secrets configuration
[env.production.vars]
ENVIRONMENT = "production"

[[env.production.secrets]]
name = "RESEND_API_KEY"

[env.development.vars]
ENVIRONMENT = "development"

[[env.development.secrets]]
name = "RESEND_API_KEY"

# Add D1 database binding if you're using one
# [d1_databases]
# DB_NAME = "your_database_binding"